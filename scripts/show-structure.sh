#!/bin/bash

# ðŸ“Š Script para mostrar a estrutura criada da Nova Arquitetura
# Executa: chmod +x scripts/show-structure.sh && ./scripts/show-structure.sh

echo "ðŸ—ï¸ Estrutura da Nova Arquitetura Clean Architecture"
echo "=================================================="
echo ""

echo "ðŸ“¦ INTERNAL - Internal Packages"
echo "â””â”€â”€ internal/"
echo "    â”œâ”€â”€ core/         # ðŸŽ¯ Core Business Logic"
echo "    â”œâ”€â”€ services/     # ðŸ”§ Application Services"
echo "    â””â”€â”€ adapters/     # ðŸ”Œ External Connections"
echo ""
echo "ðŸŽ¯ CORE - Business Logic (LÃ³gica de NegÃ³cio Pura)"
echo "â”œâ”€â”€ session/          # Gerenciamento de sessÃµes WhatsApp"
echo "â”œâ”€â”€ messaging/        # LÃ³gica de mensagens e validaÃ§Ãµes"
echo "â”œâ”€â”€ contacts/         # Regras de contatos"
echo "â”œâ”€â”€ groups/           # LÃ³gica de grupos e participantes"
echo "â”œâ”€â”€ media/            # Regras de mÃ­dia e cache"
echo "â”œâ”€â”€ newsletter/       # LÃ³gica de newsletters"
echo "â”œâ”€â”€ community/        # Regras de comunidades"
echo "â”œâ”€â”€ integrations/"
echo "â”‚   â”œâ”€â”€ chatwoot/     # LÃ³gica de integraÃ§Ã£o Chatwoot"
echo "â”‚   â””â”€â”€ webhook/      # Regras de webhooks"
echo "â””â”€â”€ shared/"
echo "    â”œâ”€â”€ errors/       # Erros de domÃ­nio"
echo "    â”œâ”€â”€ events/       # Sistema de eventos"
echo "    â””â”€â”€ types/        # Tipos compartilhados"
echo ""

echo "ðŸ”§ SERVICES - Application Services (OrquestraÃ§Ã£o)"
echo "â”œâ”€â”€ session_service.go      # OrquestraÃ§Ã£o de sessÃµes"
echo "â”œâ”€â”€ message_service.go      # CoordenaÃ§Ã£o de mensagens"
echo "â”œâ”€â”€ contact_service.go      # OrquestraÃ§Ã£o de contatos"
echo "â”œâ”€â”€ group_service.go        # CoordenaÃ§Ã£o de grupos"
echo "â”œâ”€â”€ chatwoot_service.go     # OrquestraÃ§Ã£o Chatwoot"
echo "â”œâ”€â”€ webhook_service.go      # CoordenaÃ§Ã£o webhooks"
echo "â”œâ”€â”€ media_service.go        # OrquestraÃ§Ã£o de mÃ­dia"
echo "â”œâ”€â”€ newsletter_service.go   # CoordenaÃ§Ã£o newsletters"
echo "â”œâ”€â”€ community_service.go    # OrquestraÃ§Ã£o comunidades"
echo "â””â”€â”€ shared/"
echo "    â”œâ”€â”€ validation/         # ValidaÃ§Ãµes de entrada"
echo "    â””â”€â”€ mapping/            # DTOs e mapeamentos"
echo ""

echo "ðŸ”Œ ADAPTERS - External Connections (ConexÃµes Externas)"
echo "â”œâ”€â”€ http/"
echo "â”‚   â”œâ”€â”€ handlers/           # REST API handlers"
echo "â”‚   â”œâ”€â”€ middleware/         # Middlewares HTTP"
echo "â”‚   â””â”€â”€ routes/             # ConfiguraÃ§Ã£o de rotas"
echo "â”œâ”€â”€ database/"
echo "â”‚   â”œâ”€â”€ postgres/           # ImplementaÃ§Ãµes Repository"
echo "â”‚   â””â”€â”€ migrations/         # MigraÃ§Ãµes de banco"
echo "â”œâ”€â”€ whatsapp/               # Gateway WhatsApp"
echo "â”œâ”€â”€ chatwoot/               # Gateway Chatwoot"
echo "â””â”€â”€ events/                 # Event Publishers"
echo ""

echo "ðŸš€ CMD - Entry Points (Pontos de Entrada)"
echo "â”œâ”€â”€ server/                 # HTTP Server"
echo "â”œâ”€â”€ worker/                 # Background workers"
echo "â””â”€â”€ cli/                    # CLI tools"
echo ""

echo "ðŸ§ª TESTS - Test Structure (Estrutura de Testes)"
echo "â”œâ”€â”€ core/                   # Testes unitÃ¡rios do core"
echo "â”œâ”€â”€ services/               # Testes de services"
echo "â”œâ”€â”€ adapters/               # Testes de adapters"
echo "â”œâ”€â”€ integration/            # Testes de integraÃ§Ã£o"
echo "â”œâ”€â”€ e2e/                    # Testes end-to-end"
echo "â””â”€â”€ helpers/                # Helpers e mocks"
echo ""

echo "ðŸ“‹ SCRIPTS - Automation (AutomaÃ§Ã£o)"
echo "â”œâ”€â”€ validate-architecture.sh   # Validar regras arquiteturais"
echo "â”œâ”€â”€ check-dependencies.sh      # Verificar dependÃªncias"
echo "â”œâ”€â”€ test-coverage.sh           # Cobertura de testes"
echo "â”œâ”€â”€ generate-mocks.sh          # Gerar mocks"
echo "â””â”€â”€ run-migrations.sh          # Executar migraÃ§Ãµes"
echo ""

echo "ðŸ“š DOCS - Documentation (DocumentaÃ§Ã£o)"
echo "â”œâ”€â”€ architecture/           # DocumentaÃ§Ã£o arquitetural"
echo "â”œâ”€â”€ api/                    # DocumentaÃ§Ã£o da API"
echo "â””â”€â”€ development/            # Guias de desenvolvimento"
echo ""

echo "ðŸ“Š ESTATÃSTICAS:"
echo "   ðŸŽ¯ Core: $(find internal/core -name "*.go" 2>/dev/null | wc -l) arquivos Go"
echo "   ðŸ”§ Services: $(find internal/services -name "*.go" 2>/dev/null | wc -l) arquivos Go"
echo "   ðŸ”Œ Adapters: $(find internal/adapters -name "*.go" 2>/dev/null | wc -l) arquivos Go"
echo "   ðŸš€ CMD: $(find cmd -name "*.go" 2>/dev/null | wc -l) arquivos Go"
echo "   ðŸ§ª Tests: $(find tests -name "*.go" 2>/dev/null | wc -l) arquivos de teste"
echo "   ðŸ“‹ Scripts: $(find scripts -name "*.sh" 2>/dev/null | wc -l) scripts"
echo ""

echo "âœ… Estrutura criada seguindo Clean Architecture!"
echo "ðŸ“– Consulte MIGRATION_PLAN.md para prÃ³ximos passos"
